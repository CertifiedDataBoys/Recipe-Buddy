</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
<script>
    function searchQuery() {
        window.location.href = '/search?q=' + encodeURIComponent(document.getElementById("recipe-search").value);
    }
    $("#recipe-search").on("keydown", function search(e) {
        if (e.code == "Enter")
            searchQuery();
    });
    $(".search-btn").on("click", function() {
        searchQuery();
    });
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
        return false;
    };
    $(document).ready(function() {
        // Search page
        if (getUrlParameter("q")) {
            $("#recipe-search").val(getUrlParameter("q"));
            $("#search-term").html(getUrlParameter("q"));
            $.getJSON("/api/v1.0.0/public/recipe/search_recipes?q=" + getUrlParameter("q"), function(data) {
                var recipes = data.recipes;
                var html = "";
                for (var i = 0; i < recipes.length; i++) {
                    html += "<div class='col-md-4'><div class='card'><div class='card-body' style='background: linear-gradient(to right, #fcba03, #fc9003);'><h5 class='card-title' style='color: black;'>" + recipes[i].title + "</h5><p class='card-text' style='color: black;'>" + recipes[i].description + "</p><a href='/recipe/" + recipes[i].pk + "' class='btn search-btn'>View Recipe</a></div></div></div>";
                }
                $("#search-results").html(html);
            });
        }
    });
</script>
</body>

</html>